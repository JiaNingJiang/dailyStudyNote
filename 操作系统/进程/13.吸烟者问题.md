# 一、问题描述

![image-20231225225526251](13.吸烟者问题.assets/image-20231225225526251.png)

# 二、问题分析

![image-20231225225614441](13.吸烟者问题.assets/image-20231225225614441.png)

因为缓冲区大小为1，因此互斥信号量可以不设置。

# 三、信号量设置

![image-20231225225712463](13.吸烟者问题.assets/image-20231225225712463.png)

也可以将`finish`设置为1，看作是缓冲区的剩余空间。只不过代码与设置为0相比，稍有不同。

# 四、代码实现

![image-20231225225834532](13.吸烟者问题.assets/image-20231225225834532.png)

如果`finish`初始设置为了1，那么`P(finish)` 必须要放在`provider`的while(1)代码块的起始处。

# 五、总结

![image-20231225230020268](13.吸烟者问题.assets/image-20231225230020268.png)

注意：若一个生产者要生产多种产品，那么各个V操作应该放在各自对应的事件发生之后的位置。