![image-20231225222247278](09.信号量机制.assets/image-20231225222247278.png)

# 一、信号量机制

![image-20231225222321302](09.信号量机制.assets/image-20231225222321302.png)

# 二、整型信号量

![image-20231225222436662](09.信号量机制.assets/image-20231225222436662.png)

# 三、记录型信号量

![image-20231225222518280](09.信号量机制.assets/image-20231225222518280.png)

![image-20231225223333441](09.信号量机制.assets/image-20231225223333441.png)

举例：

![image-20231225222553080](09.信号量机制.assets/image-20231225222553080.png)

![image-20231225222603282](09.信号量机制.assets/image-20231225222603282.png)

![image-20231225222618088](09.信号量机制.assets/image-20231225222618088.png)

![image-20231225222631984](09.信号量机制.assets/image-20231225222631984.png)

![image-20231225222701315](09.信号量机制.assets/image-20231225222701315.png)

此时，CPU调度到P0进程对临界区的访问结束，发出signal

![image-20231225222746602](09.信号量机制.assets/image-20231225222746602.png)

此时，就会从挂起队列中找到一个等待临界资源的进程中唤醒一个，这里是P2

![image-20231225222842156](09.信号量机制.assets/image-20231225222842156.png)

假设此时CPU调度到P2也执行完成，也会从等待队列中唤醒一个，这里是P3

![image-20231225223103840](09.信号量机制.assets/image-20231225223103840.png)

假设此时CPU调度到P1执行完成，等待队列没有其他等待任务，因此仅仅只是修改剩余资源数。

![image-20231225223204560](09.信号量机制.assets/image-20231225223204560.png)

此时CPU又调度到P3，P3也完成，也是只修改剩余资源数。

![image-20231225223246079](09.信号量机制.assets/image-20231225223246079.png)

# 四、总结

![image-20231225223400100](09.信号量机制.assets/image-20231225223400100.png)