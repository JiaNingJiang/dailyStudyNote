# 一、文件存储空间管理

![image-20231213224059314](23.文件存储空间管理.assets/image-20231213224059314.png)

![image-20231213224122677](23.文件存储空间管理.assets/image-20231213224122677.png)

# 二、空闲表法

![image-20231213224159833](23.文件存储空间管理.assets/image-20231213224159833.png)

![image-20231213224222024](23.文件存储空间管理.assets/image-20231213224222024.png)

![image-20231213224236202](23.文件存储空间管理.assets/image-20231213224236202.png)

<img src="23.文件存储空间管理.assets/image-20231213224259959.png" alt="image-20231213224259959" style="zoom:50%;" />

# 三、空闲链表法

![image-20231213224327011](23.文件存储空间管理.assets/image-20231213224327011.png)

![image-20231213224353221](23.文件存储空间管理.assets/image-20231213224353221.png)

![image-20231213224410331](23.文件存储空间管理.assets/image-20231213224410331.png)

# 四、位示图法

![image-20231213224454042](23.文件存储空间管理.assets/image-20231213224454042.png)

![image-20231213224532236](23.文件存储空间管理.assets/image-20231213224532236.png)

# 五、成组链表法

![image-20231213224603146](23.文件存储空间管理.assets/image-20231213224603146.png)

![image-20231213224629014](23.文件存储空间管理.assets/image-20231213224629014.png)

超级块本身是一个索引块，（每一组的索引块）里面存放着该组的所有空闲数据块的块号，以及下一组空闲块索引块的块号。

## 5.1  分配

![image-20231213224832202](23.文件存储空间管理.assets/image-20231213224832202.png)

分配的空闲块数目在超级块所在组的能力范围内，超级块作为本组的索引块，直接分配所需数目的空闲数据块给对方。

![image-20231213224904116](23.文件存储空间管理.assets/image-20231213224904116.png)

超级块将所在组的所有空闲数据块都分配完了，那么超级块必须将自己的下一组空闲区的索引块内容复制到自身，也就是说超级块成为了下一组空闲区新的索引块。

这样做的目的：不论何时，都保证除了超级块所在组可能将空闲数据块分配出去，其他所有空闲区都必须是“满满当当”的。

## 5.2 回收

![image-20231213225040052](23.文件存储空间管理.assets/image-20231213225040052.png)

直接将回收的一块加入到超级块中。

![image-20231213225130369](23.文件存储空间管理.assets/image-20231213225130369.png)

假设回收的一块地址是300，那么让300记录原超级块的位置，然后将超级块移出，让300存入超级块，其余位置空闲（即超级块内现在只有1个可用块）

![image-20231213225304662](23.文件存储空间管理.assets/image-20231213225304662.png)